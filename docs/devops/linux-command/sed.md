# sed

## 简介

sed 是一种流式文本编辑器，它是文本处理中非常重要的工具，能够完美的配合正则表达式使用，功能不同凡响。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用 sed 命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有 改变，除非你使用重定向存储输出。Sed主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。

## 语法



```sh
sed [-hnV][-e<script>][-f<script文件>][文本文件]

sed [options] 'command' file(s)
sed [options] -f scriptfile file(s)
```

> **注：** Mac 语法稍有不同

### 参数说明

- `-e <script>` 或 `--expression=<script>`：以选项中的指定的 script 来处理输入的文本文件
- `-f <script文件>` 或 `--file=<script文件>`：以选项中指定的 script 文件来处理输入的文本文件
- `-h` 或 `--help`：显示帮助；
- `-n` 或 `--quiet` 或 `——silent`：仅显示 script 处理后的结果
- `-V` 或 `--version`：显示版本信息

### 操作说明

- `a` 或 `a\`：在当前行下面插入文本。
- `i` 或 `i\`：在当前行上面插入文本。
- `c` 或 `c\`：把选定的行改为新的文本。
- `d`：删除，删除选择的行。
- `D`：删除模板块的第一行。
- `s`：替换指定字符
- `h`：拷贝模板块的内容到内存中的缓冲区。
- `H`：追加模板块的内容到内存中的缓冲区。
- `g`：获得内存缓冲区的内容，并替代当前模板块中的文本。
- `G`：获得内存缓冲区的内容，并追加到当前模板块文本的后面。
- `l`：列表不能打印字符的清单。
- `n`：读取下一个输入行，用下一个命令处理新的行而不是用第一个命令。
- `N`：追加下一个输入行到模板块后面并在二者间嵌入一个新行，改变当前行号码。
- `p`：打印模板块的行。
- `P`：(大写) 打印模板块的第一行。
- `q`：退出 sed。
- `b lable`：分支到脚本中带有标记的地方，如果分支不存在则分支到脚本的末尾。
- `r file`：从file中读行。
- `t label`：if分支，从最后一行开始，条件一旦满足或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾。
- `T label`：错误分支，从最后一行开始，一旦发生错误或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾。
- `w file`：写并追加模板块到file末尾。  
- `W file`：写并追加模板块的第一行到file末尾。  
- `!`：表示后面的命令对所有没有被选定的行发生作用。  
- `=`：打印当前行号码。  
- `#`：把注释扩展到下一个换行符以前。  

## 实例

## 文档

- https://www.runoob.com/linux/linux-comm-sed.html
- https://wangchujiang.com/linux-command/c/sed.html
- https://www.imooc.com/video/14484